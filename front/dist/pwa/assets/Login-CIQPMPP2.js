import{a as u}from"./QResizeObserver-CNoPDOcS.js";import{_ as g,c as p,o as c,w as l,a as t,b as s,Q as f,ay as b,az as m,d as w,aA as v,f as i,a3 as d,a8 as h,t as x,i as y}from"./index-CG2iN3_8.js";import{Q as q}from"./QForm-lIrJDGh0.js";import{Q as S}from"./QPage-BDJqaSDQ.js";import{Q,a as C}from"./QLayout-BCZibIG9.js";const I={name:"Login",data(){return{login:{email:localStorage.getItem("remember_email")||"adimer101@gmail.com",password:"admin123Admin"},showPassword:!1,loading:!1,remember:!!localStorage.getItem("remember_email"),googleIcon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"}},computed:{googleUrl(){return`${this.$url}/auth/google/redirect`}},methods:{async loginSubmit(){try{this.loading=!0;const{data:a}=await this.$axios.post("login",{email:this.login.email,password:this.login.password});this.$store.isLogged=!0,this.$store.user=a.user,this.$axios.defaults.headers.common.Authorization=`Bearer ${a.token}`,localStorage.setItem("tokenEBA",a.token),localStorage.setItem("user",JSON.stringify(a.user)),y().permissions=(a.user.permissions||[]).map(e=>e.name),this.remember?localStorage.setItem("remember_email",this.login.email):localStorage.removeItem("remember_email"),this.$alert.success(`Bienvenido ${a.user.name||""}`),this.$router.push("/")}catch(a){this.$alert.error(a.response?.data?.message||"Credenciales invÃ¡lidas")}finally{this.loading=!1}}}},V={class:"column items-center q-mb-md"},k={class:"row items-center q-gutter-sm q-mb-md"},_={class:"q-mb-md"},B={class:"q-mb-sm"},P={class:"row items-center justify-between q-my-sm"},L={class:"text-caption text-center text-grey-8 q-mt-sm"},U=["src"],$={class:"text-caption text-grey-6 q-mt-md"};function j(a,e,A,N,o,n){return c(),p(C,{view:"lHh Lpr lFf",class:"bg-auth"},{default:l(()=>[t(Q,null,{default:l(()=>[t(S,{class:"column items-center justify-center q-pa-md"},{default:l(()=>[t(f,{class:"auth-card soft-card q-pa-lg"},{default:l(()=>[s("div",V,[s("div",k,[t(u,{src:"logo.svg",width:"40px",height:"40px",class:"rounded"}),e[6]||(e[6]=s("div",{class:"text-h6 q-mt-sm"},[s("span",{class:"text-grey-8"},"Store"),s("span",{class:"text-weight-bold"},"Copilot")],-1))])]),e[12]||(e[12]=s("div",{class:"text-h6 text-center q-mb-xs"},"Â¡Bienvenido! ðŸ‘‹",-1)),e[13]||(e[13]=s("div",{class:"text-caption text-center text-grey-7 q-mb-lg"}," Por favor, inicia sesiÃ³n en tu cuenta y comienza la aventura. ",-1)),t(q,{onSubmit:b(n.loginSubmit,["prevent"]),greedy:""},{default:l(()=>[s("div",_,[e[7]||(e[7]=s("div",{class:"text-caption text-grey-7 q-mb-xs"},"Correo electrÃ³nico o nombre de usuario",-1)),t(m,{modelValue:o.login.email,"onUpdate:modelValue":e[0]||(e[0]=r=>o.login.email=r),outlined:"",dense:"",type:"email",placeholder:"admin@demo.com",rules:[r=>!!r||"El correo es requerido"]},null,8,["modelValue","rules"])]),s("div",B,[e[8]||(e[8]=s("div",{class:"text-caption text-grey-7 q-mb-xs"},"ContraseÃ±a",-1)),t(m,{modelValue:o.login.password,"onUpdate:modelValue":e[2]||(e[2]=r=>o.login.password=r),outlined:"",dense:"",type:o.showPassword?"text":"password",placeholder:"************",rules:[r=>!!r||"La contraseÃ±a es requerida"]},{append:l(()=>[t(w,{name:o.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:e[1]||(e[1]=r=>o.showPassword=!o.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),s("div",P,[t(v,{modelValue:o.remember,"onUpdate:modelValue":e[3]||(e[3]=r=>o.remember=r),dense:"",label:"RecuÃ©rdame"},null,8,["modelValue"]),t(i,{flat:"",dense:"","no-caps":"",color:"primary",label:"Â¿Olvidaste tu contraseÃ±a?",onClick:e[4]||(e[4]=r=>a.$router.push("/forgot"))})]),t(i,{type:"submit",color:"deep-purple-5",unelevated:"","no-caps":"",class:"full-width q-my-sm",loading:o.loading,disable:o.loading,label:"Iniciar SesiÃ³n"},null,8,["loading","disable"]),s("div",L,[e[9]||(e[9]=d(" Â¿Eres nuevo en nuestra plataforma? ")),t(i,{flat:"","no-caps":"",dense:"",color:"primary",label:"Crea una cuenta",onClick:e[5]||(e[5]=r=>a.$router.push("/register"))})]),t(h,{spaced:""}),e[11]||(e[11]=s("div",{class:"row items-center justify-center text-grey-6 q-mb-sm"},"o",-1)),t(i,{outline:"","no-caps":"",class:"full-width",href:n.googleUrl,type:"a"},{default:l(()=>[s("img",{src:o.googleIcon,alt:"Google",width:"18",class:"q-mr-sm"},null,8,U),e[10]||(e[10]=d(" Continuar con Google "))]),_:1},8,["href"])]),_:1},8,["onSubmit"])]),_:1}),s("div",$," Â© "+x(new Date().getFullYear())+". Todos los derechos reservados. ",1)]),_:1})]),_:1})]),_:1})}const O=g(I,[["render",j],["__scopeId","data-v-078cc0fc"]]);export{O as default};
